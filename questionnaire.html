<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Site Customization | My Personal Brand</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Raleway:wght@300;400;500;600&display=swap" rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

  <style>
    :root {
      --primary: #1a1a2e;
      --secondary: #16213e;
      --accent: #e94560;
      --accent-light: #ff6b6b;
      --text: #ffffff;
      --text-muted: #a0a0a0;
      --border: rgba(255,255,255,0.1);
      --success: #4ade80;
      --warning: #fbbf24;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Raleway', sans-serif;
      background: var(--primary);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
    }

    /* Header */
    .questionnaire-header {
      background: var(--secondary);
      padding: 20px 40px;
      position: sticky;
      top: 0;
      z-index: 100;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--border);
    }

    .questionnaire-header h1 {
      font-family: 'Montserrat', sans-serif;
      font-size: 24px;
      font-weight: 600;
    }

    .header-actions {
      display: flex;
      gap: 15px;
    }

    /* Layout */
    .questionnaire-container {
      display: flex;
      min-height: calc(100vh - 70px);
    }

    /* Sidebar Navigation */
    .sidebar {
      width: 280px;
      background: var(--secondary);
      padding: 30px 0;
      position: sticky;
      top: 70px;
      height: calc(100vh - 70px);
      overflow-y: auto;
      border-right: 1px solid var(--border);
    }

    .sidebar-nav {
      list-style: none;
    }

    .sidebar-nav li {
      border-bottom: 1px solid var(--border);
    }

    .sidebar-nav a {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 15px 25px;
      color: var(--text-muted);
      text-decoration: none;
      transition: all 0.3s ease;
      font-size: 14px;
    }

    .sidebar-nav a:hover,
    .sidebar-nav a.active {
      color: var(--text);
      background: rgba(255,255,255,0.05);
      border-left: 3px solid var(--accent);
    }

    .sidebar-nav a i {
      width: 20px;
      text-align: center;
    }

    .sidebar-nav .progress-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--border);
      margin-left: auto;
    }

    .sidebar-nav .progress-dot.completed {
      background: var(--success);
    }

    /* Main Content */
    .main-content {
      flex: 1;
      padding: 40px 60px;
      max-width: 900px;
    }

    /* Section */
    .section {
      display: none;
      animation: fadeIn 0.3s ease;
    }

    .section.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .section-header {
      margin-bottom: 40px;
    }

    .section-header h2 {
      font-family: 'Montserrat', sans-serif;
      font-size: 32px;
      margin-bottom: 10px;
    }

    .section-header p {
      color: var(--text-muted);
      font-size: 16px;
    }

    /* Form Elements */
    .form-group {
      margin-bottom: 25px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      font-size: 14px;
    }

    .form-group label .required {
      color: var(--accent);
    }

    .form-group .help-text {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 5px;
    }

    .form-control {
      width: 100%;
      padding: 12px 16px;
      background: rgba(255,255,255,0.05);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      font-family: inherit;
      font-size: 15px;
      transition: all 0.3s ease;
    }

    .form-control:focus {
      outline: none;
      border-color: var(--accent);
      background: rgba(255,255,255,0.08);
    }

    .form-control::placeholder {
      color: var(--text-muted);
    }

    textarea.form-control {
      min-height: 120px;
      resize: vertical;
    }

    /* Form Row */
    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }

    /* Color Picker */
    .color-picker-group {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .color-picker {
      width: 50px;
      height: 40px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      padding: 0;
      overflow: hidden;
    }

    .color-picker::-webkit-color-swatch-wrapper {
      padding: 0;
    }

    .color-picker::-webkit-color-swatch {
      border: none;
      border-radius: 8px;
    }

    /* Buttons */
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 24px;
      font-family: 'Montserrat', sans-serif;
      font-size: 14px;
      font-weight: 500;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn-primary {
      background: var(--accent);
      color: white;
    }

    .btn-primary:hover {
      background: var(--accent-light);
    }

    .btn-secondary {
      background: rgba(255,255,255,0.1);
      color: var(--text);
      border: 1px solid var(--border);
    }

    .btn-secondary:hover {
      background: rgba(255,255,255,0.15);
    }

    .btn-success {
      background: var(--success);
      color: var(--primary);
    }

    .btn-warning {
      background: var(--warning);
      color: var(--primary);
    }

    /* Navigation Buttons */
    .section-nav {
      display: flex;
      justify-content: space-between;
      margin-top: 40px;
      padding-top: 30px;
      border-top: 1px solid var(--border);
    }

    /* Repeater Fields */
    .repeater {
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 15px;
      background: rgba(255,255,255,0.02);
    }

    .repeater-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .repeater-header h4 {
      font-size: 16px;
      font-weight: 500;
    }

    .repeater-actions {
      display: flex;
      gap: 10px;
    }

    .btn-icon {
      width: 32px;
      height: 32px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 6px;
      background: rgba(255,255,255,0.1);
      border: none;
      color: var(--text-muted);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn-icon:hover {
      background: rgba(255,255,255,0.2);
      color: var(--text);
    }

    .btn-icon.delete:hover {
      background: var(--accent);
      color: white;
    }

    .add-item-btn {
      width: 100%;
      padding: 15px;
      border: 2px dashed var(--border);
      background: transparent;
      color: var(--text-muted);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .add-item-btn:hover {
      border-color: var(--accent);
      color: var(--accent);
    }

    /* Icon Picker */
    .icon-picker {
      position: relative;
    }

    .icon-picker-btn {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 16px;
      background: rgba(255,255,255,0.05);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      cursor: pointer;
      width: 100%;
      text-align: left;
    }

    .icon-picker-btn i.selected-icon {
      font-size: 18px;
    }

    .icon-grid {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: var(--secondary);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 15px;
      margin-top: 5px;
      z-index: 10;
      max-height: 200px;
      overflow-y: auto;
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      gap: 5px;
    }

    .icon-grid.show {
      display: grid;
    }

    .icon-option {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .icon-option:hover {
      background: rgba(255,255,255,0.1);
    }

    .icon-option.selected {
      background: var(--accent);
    }

    /* Theme Toggle */
    .theme-toggle {
      display: flex;
      gap: 15px;
    }

    .theme-option {
      flex: 1;
      padding: 20px;
      border: 2px solid var(--border);
      border-radius: 12px;
      cursor: pointer;
      text-align: center;
      transition: all 0.3s ease;
    }

    .theme-option:hover {
      border-color: var(--text-muted);
    }

    .theme-option.selected {
      border-color: var(--accent);
      background: rgba(233, 69, 96, 0.1);
    }

    .theme-option .preview {
      width: 100%;
      height: 80px;
      border-radius: 8px;
      margin-bottom: 10px;
    }

    .theme-option.dark .preview {
      background: linear-gradient(135deg, #000 0%, #1a1a1a 100%);
    }

    .theme-option.light .preview {
      background: linear-gradient(135deg, #f5f5f5 0%, #fff 100%);
      border: 1px solid #ddd;
    }

    /* Image URL Input */
    .image-input-group {
      display: flex;
      gap: 10px;
    }

    .image-input-group .form-control {
      flex: 1;
    }

    .image-preview {
      width: 80px;
      height: 80px;
      border-radius: 8px;
      background: rgba(255,255,255,0.05);
      border: 1px solid var(--border);
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .image-preview img {
      max-width: 100%;
      max-height: 100%;
      object-fit: cover;
    }

    .image-preview i {
      color: var(--text-muted);
      font-size: 24px;
    }

    /* Success Message */
    .success-message {
      display: none;
      background: rgba(74, 222, 128, 0.1);
      border: 1px solid var(--success);
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 30px;
      text-align: center;
    }

    .success-message.show {
      display: block;
      animation: fadeIn 0.3s ease;
    }

    .success-message i {
      font-size: 48px;
      color: var(--success);
      margin-bottom: 15px;
    }

    .success-message h3 {
      margin-bottom: 10px;
    }

    /* Info Banner */
    .info-banner {
      background: rgba(100, 150, 255, 0.1);
      border: 1px solid rgba(100, 150, 255, 0.3);
      border-radius: 8px;
      margin-bottom: 30px;
      overflow: hidden;
    }

    .info-banner-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 15px 20px;
      cursor: pointer;
      transition: background 0.2s ease;
    }

    .info-banner-header:hover {
      background: rgba(100, 150, 255, 0.05);
    }

    .info-banner-title {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 600;
    }

    .info-banner-title i {
      font-size: 20px;
    }

    .info-toggle {
      transition: transform 0.3s ease;
    }

    .info-banner.collapsed .info-toggle {
      transform: rotate(-90deg);
    }

    .info-banner-content {
      padding: 0 20px 20px;
      border-top: 1px solid rgba(100, 150, 255, 0.2);
      margin-top: 0;
    }

    .info-banner.collapsed .info-banner-content {
      display: none;
    }

    .info-banner-content ol {
      margin: 15px 0;
      padding-left: 20px;
    }

    .info-banner-content li {
      margin-bottom: 10px;
      color: var(--text-muted);
    }

    .info-banner-content code {
      background: rgba(255, 255, 255, 0.1);
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 13px;
    }

    .info-note {
      background: rgba(255, 255, 255, 0.05);
      padding: 12px 15px;
      border-radius: 6px;
      font-size: 13px;
      margin-top: 15px;
    }

    .info-note i {
      margin-right: 8px;
      color: var(--accent);
    }

    /* Responsive */

    @media (max-width: 991px) {
      .questionnaire-header {
        flex-direction: column;
        gap: 15px;
        padding: 15px 20px;
      }

      .questionnaire-header h1 {
        font-size: 18px;
      }

      .header-actions {
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
      }

      .header-actions .btn {
        padding: 8px 12px;
        font-size: 13px;
      }

      .questionnaire-container {
        flex-direction: column;
      }

      .sidebar {
        width: 100%;
        height: auto;
        position: relative;
        top: 0;
      }

      .sidebar-nav {
        display: flex;
        overflow-x: auto;
        padding: 0 15px;
      }

      .sidebar-nav li {
        border-bottom: none;
        flex-shrink: 0;
      }

      .sidebar-nav a {
        padding: 15px;
        white-space: nowrap;
      }

      .main-content {
        padding: 30px 20px;
      }

      .form-row {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="questionnaire-header">
    <h1><i class="fas fa-magic"></i> Site Customization</h1>
    <div class="header-actions">
      <button class="btn btn-secondary" onclick="resetToDefaults()">
        <i class="fas fa-undo"></i> Reset
      </button>
      <button class="btn btn-secondary" onclick="exportConfig()">
        <i class="fas fa-download"></i> Export
      </button>
      <button class="btn btn-secondary" onclick="importConfig()">
        <i class="fas fa-upload"></i> Import
      </button>
      <button class="btn btn-primary" onclick="saveConfig()">
        <i class="fas fa-save"></i> Save
      </button>
    </div>
  </header>

  <div class="questionnaire-container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <ul class="sidebar-nav">
        <li>
          <a href="#personal" class="active" data-section="personal">
            <i class="fas fa-user"></i>
            Personal Info
            <span class="progress-dot"></span>
          </a>
        </li>
        <li>
          <a href="#contact" data-section="contact">
            <i class="fas fa-envelope"></i>
            Contact
            <span class="progress-dot"></span>
          </a>
        </li>
        <li>
          <a href="#branding" data-section="branding">
            <i class="fas fa-palette"></i>
            Branding
            <span class="progress-dot"></span>
          </a>
        </li>
        <li>
          <a href="#hero" data-section="hero">
            <i class="fas fa-images"></i>
            Hero Slides
            <span class="progress-dot"></span>
          </a>
        </li>
        <li>
          <a href="#services" data-section="services">
            <i class="fas fa-cogs"></i>
            Services
            <span class="progress-dot"></span>
          </a>
        </li>
        <li>
          <a href="#focus-areas" data-section="focus-areas">
            <i class="fas fa-th-large"></i>
            Focus Areas
            <span class="progress-dot"></span>
          </a>
        </li>
        <li>
          <a href="#solutions" data-section="solutions">
            <i class="fas fa-industry"></i>
            Solutions
            <span class="progress-dot"></span>
          </a>
        </li>
        <li>
          <a href="#process" data-section="process">
            <i class="fas fa-tasks"></i>
            Process
            <span class="progress-dot"></span>
          </a>
        </li>
        <li>
          <a href="#problems" data-section="problems">
            <i class="fas fa-exclamation-triangle"></i>
            Challenges
            <span class="progress-dot"></span>
          </a>
        </li>
        <li>
          <a href="#experience" data-section="experience">
            <i class="fas fa-history"></i>
            Experience
            <span class="progress-dot"></span>
          </a>
        </li>
        <li>
          <a href="#testimonials" data-section="testimonials">
            <i class="fas fa-quote-left"></i>
            Testimonials
            <span class="progress-dot"></span>
          </a>
        </li>
        <li>
          <a href="#images" data-section="images">
            <i class="fas fa-image"></i>
            Images
            <span class="progress-dot"></span>
          </a>
        </li>
        <li>
          <a href="#seo" data-section="seo">
            <i class="fas fa-search"></i>
            SEO
            <span class="progress-dot"></span>
          </a>
        </li>
      </ul>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Success Message -->
      <div class="success-message" id="successMessage">
        <i class="fas fa-check-circle"></i>
        <h3>Configuration Saved!</h3>
        <p>Your changes have been saved. Click "Preview Site" to see them in action.</p>
        <a href="index.html" class="btn btn-primary" style="margin-top: 15px;">
          <i class="fas fa-external-link-alt"></i> Preview Site
        </a>
      </div>

      <!-- Permanent Configuration Deployment Info -->
      <div class="info-banner" id="deploymentInfo">
        <div class="info-banner-header" onclick="toggleDeploymentInfo()">
          <div class="info-banner-title">
            <i class="fas fa-cloud-upload-alt"></i>
            <span>Permanent Configuration Deployment</span>
          </div>
          <i class="fas fa-chevron-down info-toggle"></i>
        </div>
        <div class="info-banner-content">
          <p><strong>How to make your customizations permanent:</strong></p>

          <h4 style="margin-top: 20px; margin-bottom: 10px; color: var(--accent);"><i class="fas fa-star"></i> Option 1: Upload via RebrandMyself Dashboard (Recommended)</h4>
          <ol>
            <li>Fill out the questionnaire and click <strong>"Save"</strong> to preview your changes locally</li>
            <li>When you're happy with your changes, click <strong>"Export"</strong> to download <code>site-config.json</code></li>
            <li>Visit <a href="https://rebrandmyself.net/dashboard" target="_blank" style="color: var(--accent);">rebrandmyself.net/dashboard</a></li>
            <li>Upload your <code>site-config.json</code> file there and your site will be updated automatically</li>
          </ol>

          <hr style="border-color: rgba(100, 150, 255, 0.2); margin: 15px 0;">

          <h4 style="margin-bottom: 10px;"><i class="fab fa-github"></i> Option 2: Manual GitHub Deployment</h4>
          <ol>
            <li>Fill out the questionnaire and click <strong>"Save"</strong> to preview your changes locally</li>
            <li>When you're happy with your changes, click <strong>"Export"</strong> to download <code>site-config.json</code></li>
            <li>Replace the <code>site-config.json</code> file in your GitHub repository with the downloaded file</li>
            <li>Commit and push the changes to your repository</li>
            <li>GitHub Pages will automatically serve your customized site!</li>
          </ol>

          <p class="info-note"><i class="fas fa-info-circle"></i> Local preview uses browser storage. For persistent deployment, use one of the options above to save your configuration permanently.</p>
          <hr style="border-color: rgba(100, 150, 255, 0.2); margin: 15px 0;">
          <p><strong>To disable customization after deployment:</strong></p>
          <p style="color: var(--text-muted); font-size: 13px;">Create an empty file named <code>customization.disable</code> in your repository root. This will change the button to "Rebrand Myself" linking to RebrandMyself.net. To re-enable customization, simply delete the file.</p>
        </div>
      </div>

      <!-- Personal Info Section -->
      <section class="section active" id="section-personal">
        <div class="section-header">
          <h2>Personal Information</h2>
          <p>Tell us about yourself. This information will appear throughout your site.</p>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>First Name <span class="required">*</span></label>
            <input type="text" class="form-control" id="firstName" placeholder="John">
          </div>
          <div class="form-group">
            <label>Last Name <span class="required">*</span></label>
            <input type="text" class="form-control" id="lastName" placeholder="Doe">
          </div>
        </div>

        <div class="form-group">
          <label>Professional Title <span class="required">*</span></label>
          <input type="text" class="form-control" id="title" placeholder="e.g., Technology Consultant, Business Strategist">
          <p class="help-text">Your main professional role or title</p>
        </div>

        <div class="form-group">
          <label>Tagline</label>
          <input type="text" class="form-control" id="tagline" placeholder="e.g., Helping businesses leverage technology for growth">
          <p class="help-text">A short, memorable phrase that captures what you do</p>
        </div>

        <div class="form-group">
          <label>Short Bio <span class="required">*</span></label>
          <textarea class="form-control" id="shortBio" rows="3" placeholder="A brief 1-2 sentence introduction..."></textarea>
          <p class="help-text">This appears in previews and short descriptions</p>
        </div>

        <div class="form-group">
          <label>Full Bio</label>
          <textarea class="form-control" id="fullBio" rows="6" placeholder="Tell your story... (separate paragraphs with blank lines)"></textarea>
          <p class="help-text">Your complete story for the About page</p>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Years of Experience</label>
            <input type="text" class="form-control" id="yearsExperience" placeholder="e.g., 10+">
          </div>
          <div class="form-group">
            <label>Location</label>
            <input type="text" class="form-control" id="location" placeholder="e.g., San Francisco, CA">
          </div>
        </div>

        <div class="section-nav">
          <div></div>
          <button class="btn btn-primary" onclick="goToSection('contact')">
            Next: Contact <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </section>

      <!-- Contact Section -->
      <section class="section" id="section-contact">
        <div class="section-header">
          <h2>Contact Information</h2>
          <p>How can people reach you?</p>
        </div>

        <div class="form-group">
          <label>Email Address <span class="required">*</span></label>
          <input type="email" class="form-control" id="email" placeholder="hello@yourdomain.com">
        </div>

        <div class="form-group">
          <label>Phone Number</label>
          <input type="tel" class="form-control" id="phone" placeholder="+1 (555) 123-4567">
          <p class="help-text">Optional - leave blank to hide from site</p>
        </div>

        <div class="form-group">
          <label>Website URL</label>
          <input type="url" class="form-control" id="website" placeholder="https://yourdomain.com">
        </div>

        <div class="form-group">
          <label>Calendly / Booking URL</label>
          <input type="url" class="form-control" id="calendlyUrl" placeholder="https://calendly.com/yourname">
          <p class="help-text">Optional - for scheduling calls directly</p>
        </div>

        <hr style="border-color: var(--border); margin: 30px 0;">

        <h4 style="margin-bottom: 20px;">Social Media Links</h4>
        <p style="color: var(--text-muted); margin-bottom: 20px; font-size: 14px;">Leave blank any platforms you don't use</p>

        <div class="form-row">
          <div class="form-group">
            <label><i class="fab fa-linkedin"></i> LinkedIn</label>
            <input type="url" class="form-control" id="social-linkedin" placeholder="https://linkedin.com/in/yourname">
          </div>
          <div class="form-group">
            <label><i class="fab fa-twitter"></i> Twitter / X</label>
            <input type="url" class="form-control" id="social-twitter" placeholder="https://twitter.com/yourname">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label><i class="fab fa-github"></i> GitHub</label>
            <input type="url" class="form-control" id="social-github" placeholder="https://github.com/yourname">
          </div>
          <div class="form-group">
            <label><i class="fab fa-instagram"></i> Instagram</label>
            <input type="url" class="form-control" id="social-instagram" placeholder="https://instagram.com/yourname">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label><i class="fab fa-youtube"></i> YouTube</label>
            <input type="url" class="form-control" id="social-youtube" placeholder="https://youtube.com/@yourname">
          </div>
          <div class="form-group">
            <label><i class="fab fa-facebook"></i> Facebook</label>
            <input type="url" class="form-control" id="social-facebook" placeholder="https://facebook.com/yourname">
          </div>
        </div>

        <div class="section-nav">
          <button class="btn btn-secondary" onclick="goToSection('personal')">
            <i class="fas fa-arrow-left"></i> Back
          </button>
          <button class="btn btn-primary" onclick="goToSection('branding')">
            Next: Branding <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </section>

      <!-- Branding Section -->
      <section class="section" id="section-branding">
        <div class="section-header">
          <h2>Branding & Design</h2>
          <p>Customize the look and feel of your site.</p>
        </div>

        <div class="form-group">
          <label>Brand Name / Site Name</label>
          <input type="text" class="form-control" id="siteName" placeholder="e.g., YourBrand, John Doe Consulting">
          <p class="help-text">Appears in the logo area if no logo image is provided</p>
        </div>

        <div class="form-group">
          <label>Logo URL</label>
          <div class="image-input-group">
            <input type="url" class="form-control" id="logoUrl" placeholder="https://example.com/logo.png">
            <div class="image-preview" id="logoPreview">
              <i class="fas fa-image"></i>
            </div>
          </div>
          <p class="help-text">Recommended: PNG with transparent background, 200x50px</p>
        </div>

        <div class="form-group">
          <label>Favicon URL</label>
          <input type="url" class="form-control" id="faviconUrl" placeholder="https://example.com/favicon.png">
          <p class="help-text">The small icon that appears in browser tabs (32x32px)</p>
        </div>

        <hr style="border-color: var(--border); margin: 30px 0;">

        <h4 style="margin-bottom: 20px;">Theme</h4>

        <div class="theme-toggle">
          <div class="theme-option dark selected" onclick="selectTheme('dark')">
            <div class="preview"></div>
            <strong>Dark Theme</strong>
            <p style="font-size: 12px; color: var(--text-muted);">Professional & Modern</p>
          </div>
          <div class="theme-option light" onclick="selectTheme('light')">
            <div class="preview"></div>
            <strong>Light Theme</strong>
            <p style="font-size: 12px; color: var(--text-muted);">Clean & Minimal</p>
          </div>
        </div>
        <input type="hidden" id="lightTheme" value="false">

        <hr style="border-color: var(--border); margin: 30px 0;">

        <h4 style="margin-bottom: 20px;">Colors</h4>

        <div class="form-row">
          <div class="form-group">
            <label>Primary Color (Background)</label>
            <div class="color-picker-group">
              <input type="color" class="color-picker" id="colorPrimary" value="#000000">
              <input type="text" class="form-control" id="colorPrimaryText" value="#000000" style="width: 120px;">
            </div>
          </div>
          <div class="form-group">
            <label>Secondary Color (Cards)</label>
            <div class="color-picker-group">
              <input type="color" class="color-picker" id="colorSecondary" value="#090909">
              <input type="text" class="form-control" id="colorSecondaryText" value="#090909" style="width: 120px;">
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Accent Color (Highlights)</label>
            <div class="color-picker-group">
              <input type="color" class="color-picker" id="colorAccent" value="#c5a47e">
              <input type="text" class="form-control" id="colorAccentText" value="#c5a47e" style="width: 120px;">
            </div>
          </div>
          <div class="form-group">
            <label>Text Color</label>
            <div class="color-picker-group">
              <input type="color" class="color-picker" id="colorText" value="#ffffff">
              <input type="text" class="form-control" id="colorTextVal" value="#ffffff" style="width: 120px;">
            </div>
          </div>
        </div>

        <div class="section-nav">
          <button class="btn btn-secondary" onclick="goToSection('contact')">
            <i class="fas fa-arrow-left"></i> Back
          </button>
          <button class="btn btn-primary" onclick="goToSection('hero')">
            Next: Hero Slides <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </section>

      <!-- Hero Slides Section -->
      <section class="section" id="section-hero">
        <div class="section-header">
          <h2>Hero Slides</h2>
          <p>Configure the slides that appear on your homepage hero section.</p>
        </div>

        <div id="heroSlidesContainer">
          <!-- Slides will be populated by JS -->
        </div>

        <button class="add-item-btn" onclick="addHeroSlide()">
          <i class="fas fa-plus"></i> Add Another Slide
        </button>

        <div class="section-nav">
          <button class="btn btn-secondary" onclick="goToSection('branding')">
            <i class="fas fa-arrow-left"></i> Back
          </button>
          <button class="btn btn-primary" onclick="goToSection('services')">
            Next: Services <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </section>

      <!-- Services Section -->
      <section class="section" id="section-services">
        <div class="section-header">
          <h2>Services</h2>
          <p>What services do you offer? These appear on your Services page and homepage.</p>
        </div>

        <div id="servicesContainer">
          <!-- Services will be populated by JS -->
        </div>

        <button class="add-item-btn" onclick="addService()">
          <i class="fas fa-plus"></i> Add Another Service
        </button>

        <div class="section-nav">
          <button class="btn btn-secondary" onclick="goToSection('hero')">
            <i class="fas fa-arrow-left"></i> Back
          </button>
          <button class="btn btn-primary" onclick="goToSection('focus-areas')">
            Next: Focus Areas <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </section>

      <!-- Focus Areas Section -->
      <section class="section" id="section-focus-areas">
        <div class="section-header">
          <h2>Focus Areas</h2>
          <p>Showcase your areas of expertise with image cards (like "Where We Can Help" sections).</p>
        </div>

        <div class="form-group">
          <label for="focusSubheading">Section Subheading</label>
          <input type="text" class="form-control" id="focusSubheading" placeholder="e.g., Where We Can Help">
        </div>

        <div class="form-group">
          <label for="focusHeading">Section Heading</label>
          <input type="text" class="form-control" id="focusHeading" placeholder="e.g., Areas of Expertise">
        </div>

        <div class="form-group">
          <label for="focusTagline">Tagline</label>
          <input type="text" class="form-control" id="focusTagline" placeholder="e.g., Specialized guidance available • On-site or remote">
        </div>

        <h4 style="margin-top: 30px; margin-bottom: 15px;">Focus Area Cards</h4>

        <div id="focusAreasContainer">
          <!-- Focus areas will be populated by JS -->
        </div>

        <button class="add-item-btn" onclick="addFocusArea()">
          <i class="fas fa-plus"></i> Add Another Focus Area
        </button>

        <div class="section-nav">
          <button class="btn btn-secondary" onclick="goToSection('services')">
            <i class="fas fa-arrow-left"></i> Back
          </button>
          <button class="btn btn-primary" onclick="goToSection('solutions')">
            Next: Solutions <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </section>

      <!-- Solutions Section -->
      <section class="section" id="section-solutions">
        <div class="section-header">
          <h2>Solutions / Industries</h2>
          <p>What industries or niches do you serve?</p>
        </div>

        <div id="solutionsContainer">
          <!-- Solutions will be populated by JS -->
        </div>

        <button class="add-item-btn" onclick="addSolution()">
          <i class="fas fa-plus"></i> Add Another Solution
        </button>

        <div class="section-nav">
          <button class="btn btn-secondary" onclick="goToSection('focus-areas')">
            <i class="fas fa-arrow-left"></i> Back
          </button>
          <button class="btn btn-primary" onclick="goToSection('process')">
            Next: Process <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </section>

      <!-- Process Section -->
      <section class="section" id="section-process">
        <div class="section-header">
          <h2>Process</h2>
          <p>Describe how you work — the steps you take with clients from start to finish.</p>
        </div>

        <div id="processContainer">
          <!-- Process steps will be populated by JS -->
        </div>

        <button class="add-item-btn" onclick="addProcessStep()">
          <i class="fas fa-plus"></i> Add Another Step
        </button>

        <div class="section-nav">
          <button class="btn btn-secondary" onclick="goToSection('solutions')">
            <i class="fas fa-arrow-left"></i> Back
          </button>
          <button class="btn btn-primary" onclick="goToSection('problems')">
            Next: Challenges <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </section>

      <!-- Problems Section -->
      <section class="section" id="section-problems">
        <div class="section-header">
          <h2>Common Challenges</h2>
          <p>What problems do your clients face, and how do you solve them?</p>
        </div>

        <div id="problemsContainer">
          <!-- Problems will be populated by JS -->
        </div>

        <button class="add-item-btn" onclick="addProblem()">
          <i class="fas fa-plus"></i> Add Another Challenge
        </button>

        <div class="section-nav">
          <button class="btn btn-secondary" onclick="goToSection('process')">
            <i class="fas fa-arrow-left"></i> Back
          </button>
          <button class="btn btn-primary" onclick="goToSection('experience')">
            Next: Experience <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </section>

      <!-- Experience Section -->
      <section class="section" id="section-experience">
        <div class="section-header">
          <h2>Experience Timeline</h2>
          <p>Share your professional journey.</p>
        </div>

        <div id="timelineContainer">
          <!-- Timeline items will be populated by JS -->
        </div>

        <button class="add-item-btn" onclick="addTimelineItem()">
          <i class="fas fa-plus"></i> Add Another Period
        </button>

        <hr style="border-color: var(--border); margin: 40px 0;">

        <h4 style="margin-bottom: 20px;">Core Values / Philosophy</h4>
        <p style="color: var(--text-muted); margin-bottom: 20px; font-size: 14px;">What principles guide your work?</p>

        <div id="philosophyContainer">
          <!-- Philosophy items will be populated by JS -->
        </div>

        <button class="add-item-btn" onclick="addPhilosophy()">
          <i class="fas fa-plus"></i> Add Another Value
        </button>

        <div class="section-nav">
          <button class="btn btn-secondary" onclick="goToSection('problems')">
            <i class="fas fa-arrow-left"></i> Back
          </button>
          <button class="btn btn-primary" onclick="goToSection('testimonials')">
            Next: Testimonials <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </section>

      <!-- Testimonials Section -->
      <section class="section" id="section-testimonials">
        <div class="section-header">
          <h2>Testimonials</h2>
          <p>What do your clients say about you?</p>
        </div>

        <div id="testimonialsContainer">
          <!-- Testimonials will be populated by JS -->
        </div>

        <button class="add-item-btn" onclick="addTestimonial()">
          <i class="fas fa-plus"></i> Add Another Testimonial
        </button>

        <div class="section-nav">
          <button class="btn btn-secondary" onclick="goToSection('experience')">
            <i class="fas fa-arrow-left"></i> Back
          </button>
          <button class="btn btn-primary" onclick="goToSection('images')">
            Next: Images <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </section>

      <!-- Images Section -->
      <section class="section" id="section-images">
        <div class="section-header">
          <h2>Images</h2>
          <p>Add images to personalize your site. Use URLs from image hosting services or your own server.</p>
        </div>

        <div class="form-group">
          <label>Hero Background Image</label>
          <input type="url" class="form-control" id="heroBackground" placeholder="https://example.com/hero-background.jpg">
          <p class="help-text">Main background image for the hero section and page headers</p>
        </div>

        <div class="form-group">
          <label>About Page Image</label>
          <div class="image-input-group">
            <input type="url" class="form-control" id="aboutImage" placeholder="https://example.com/about-image.jpg">
            <div class="image-preview" id="aboutImagePreview">
              <i class="fas fa-image"></i>
            </div>
          </div>
          <p class="help-text">Professional photo or illustration for your About page</p>
        </div>

        <div class="form-group">
          <label>Parallax Image 1</label>
          <input type="url" class="form-control" id="parallaxImage1" placeholder="https://example.com/parallax1.jpg">
          <p class="help-text">Background image for visual breaks between sections</p>
        </div>

        <div class="form-group">
          <label>Parallax Image 2</label>
          <input type="url" class="form-control" id="parallaxImage2" placeholder="https://example.com/parallax2.jpg">
        </div>

        <hr style="border-color: var(--border); margin: 30px 0;">

        <h4 style="margin-bottom: 20px;">Gallery Images</h4>
        <p style="color: var(--text-muted); margin-bottom: 20px; font-size: 14px;">Images for the gallery section on your About page</p>

        <div id="galleryContainer">
          <!-- Gallery images will be populated by JS -->
        </div>

        <button class="add-item-btn" onclick="addGalleryImage()">
          <i class="fas fa-plus"></i> Add Another Image
        </button>

        <div class="section-nav">
          <button class="btn btn-secondary" onclick="goToSection('testimonials')">
            <i class="fas fa-arrow-left"></i> Back
          </button>
          <button class="btn btn-primary" onclick="goToSection('seo')">
            Next: SEO <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </section>

      <!-- SEO Section -->
      <section class="section" id="section-seo">
        <div class="section-header">
          <h2>SEO & Meta Information</h2>
          <p>Optimize your site for search engines.</p>
        </div>

        <div class="form-group">
          <label>Site Title</label>
          <input type="text" class="form-control" id="seoTitle" placeholder="e.g., John Doe - Technology Consultant">
          <p class="help-text">Appears in browser tabs and search results</p>
        </div>

        <div class="form-group">
          <label>Meta Description</label>
          <textarea class="form-control" id="seoDescription" rows="3" placeholder="A compelling description of your services (150-160 characters)..."></textarea>
          <p class="help-text">This appears in search engine results</p>
        </div>

        <div class="form-group">
          <label>Keywords</label>
          <input type="text" class="form-control" id="seoKeywords" placeholder="e.g., technology consultant, business solutions, integration">
          <p class="help-text">Comma-separated keywords related to your services</p>
        </div>

        <div class="form-group">
          <label>Social Sharing Image URL</label>
          <input type="url" class="form-control" id="ogImage" placeholder="https://example.com/social-image.jpg">
          <p class="help-text">Image shown when your site is shared on social media (1200x630px recommended)</p>
        </div>

        <hr style="border-color: var(--border); margin: 30px 0;">

        <h4 style="margin-bottom: 20px;">Footer</h4>

        <div class="form-group">
          <label>Footer Tagline</label>
          <input type="text" class="form-control" id="footerTagline" placeholder="Brief tagline for the footer area">
        </div>

        <div class="form-group">
          <label>Copyright Name</label>
          <input type="text" class="form-control" id="copyrightName" placeholder="e.g., John Doe or Your Company Name">
        </div>

        <div class="section-nav">
          <button class="btn btn-secondary" onclick="goToSection('images')">
            <i class="fas fa-arrow-left"></i> Back
          </button>
          <button class="btn btn-success" onclick="saveConfig()">
            <i class="fas fa-save"></i> Save Configuration
          </button>
        </div>
      </section>
    </main>

  </div>

  <!-- Hidden file input for import -->
  <input type="file" id="importFileInput" accept=".json" style="display: none;" onchange="handleImport(event)">

  <script src="assets/js/config.js"></script>
  <script>
    // ==========================================
    // State Management
    // ==========================================
    let currentConfig = {};
    let currentSection = 'personal';

    // Icon options for picker
    const iconOptions = [
      'fas fa-search', 'fas fa-pencil-ruler', 'fas fa-cogs', 'fas fa-chart-line',
      'fas fa-users', 'fas fa-headset', 'fas fa-lightbulb', 'fas fa-rocket',
      'fas fa-code', 'fas fa-database', 'fas fa-cloud', 'fas fa-shield-alt',
      'fas fa-mobile-alt', 'fas fa-desktop', 'fas fa-server', 'fas fa-network-wired',
      'fas fa-plug', 'fas fa-check-circle', 'fas fa-star', 'fas fa-heart',
      'fas fa-trophy', 'fas fa-gem', 'fas fa-bolt', 'fas fa-magic',
      'fas fa-store', 'fas fa-hard-hat', 'fas fa-heartbeat', 'fas fa-graduation-cap',
      'fas fa-building', 'fas fa-industry', 'fas fa-briefcase', 'fas fa-balance-scale'
    ];

    // ==========================================
    // Initialization
    // ==========================================
    document.addEventListener('DOMContentLoaded', async function() {
      // Check if customization is enabled before initializing
      const enabled = await checkCustomizeAccess();
      if (!enabled) {
        // Redirect to home page if customization is disabled
        document.body.innerHTML = '<div style="display: flex; align-items: center; justify-content: center; height: 100vh; text-align: center; color: #fff; font-family: sans-serif;"><div><h1>Customization Disabled</h1><p>The site owner has disabled customization.</p><a href="index.html" style="color: #c5a47e;">Return to Home</a></div></div>';
        return;
      }
      await loadExistingConfig();
      setupEventListeners();
      initRepeaterFields();
    });

    // Check if customization is enabled (disabled if customization.disable file exists)
    async function checkCustomizeAccess() {
      try {
        const response = await fetch('customization.disable');
        if (response.ok) {
          // File exists - customization is disabled
          return false;
        }
      } catch (e) {
        // File doesn't exist - customization is enabled
      }
      return true;
    }

    async function loadExistingConfig() {
      // Try to load from localStorage first
      const saved = localStorage.getItem('siteConfig');
      if (saved) {
        try {
          currentConfig = JSON.parse(saved);
          populateForm();
          return;
        } catch (e) {
          // Invalid localStorage, continue to try site-config.json
        }
      }

      // No localStorage - try to load site-config.json
      try {
        const response = await fetch('site-config.json');
        if (response.ok) {
          const siteConfigJson = await response.json();
          currentConfig = JSON.parse(JSON.stringify(siteConfigJson));
          console.log('Loaded from site-config.json');
        } else {
          throw new Error('site-config.json not found');
        }
      } catch (e) {
        // Fall back to config.js defaults
        currentConfig = JSON.parse(JSON.stringify(siteConfig));
        console.log('Loaded from config.js defaults');
      }

      populateForm();
    }

    function setupEventListeners() {
      // Navigation
      document.querySelectorAll('.sidebar-nav a').forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          goToSection(this.dataset.section);
        });
      });

      // Color pickers sync with text inputs
      ['Primary', 'Secondary', 'Accent', 'Text'].forEach(color => {
        const picker = document.getElementById('color' + color);
        const text = document.getElementById('color' + color + (color === 'Text' ? 'Val' : 'Text'));
        if (picker && text) {
          picker.addEventListener('input', () => {
            text.value = picker.value;
          });
          text.addEventListener('input', () => {
            if (/^#[0-9A-Fa-f]{6}$/.test(text.value)) {
              picker.value = text.value;
            }
          });
        }
      });

      // Image preview updates
      document.getElementById('logoUrl')?.addEventListener('input', updateLogoPreview);
      document.getElementById('aboutImage')?.addEventListener('input', updateAboutImagePreview);
    }

    // ==========================================
    // Section Navigation
    // ==========================================
    function goToSection(sectionName) {
      // Hide all sections
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));

      // Show target section
      const targetSection = document.getElementById('section-' + sectionName);
      if (targetSection) {
        targetSection.classList.add('active');
      }

      // Update nav
      document.querySelectorAll('.sidebar-nav a').forEach(link => {
        link.classList.remove('active');
        if (link.dataset.section === sectionName) {
          link.classList.add('active');
        }
      });

      currentSection = sectionName;

      // Scroll to top of main content
      document.querySelector('.main-content').scrollTop = 0;
    }

    // ==========================================
    // Form Population
    // ==========================================
    function populateForm() {
      const c = currentConfig;

      // Personal
      if (c.personal) {
        setValue('firstName', c.personal.firstName);
        setValue('lastName', c.personal.lastName);
        setValue('title', c.personal.title);
        setValue('tagline', c.personal.tagline);
        setValue('shortBio', c.personal.shortBio);
        setValue('fullBio', c.personal.fullBio);
        setValue('yearsExperience', c.personal.yearsExperience);
        setValue('location', c.personal.location);
      }

      // Contact
      if (c.contact) {
        setValue('email', c.contact.email);
        setValue('phone', c.contact.phone);
        setValue('website', c.contact.website);
        setValue('calendlyUrl', c.contact.calendlyUrl);
      }

      // Social
      if (c.social) {
        Object.keys(c.social).forEach(key => {
          setValue('social-' + key, c.social[key]);
        });
      }

      // Branding
      if (c.branding) {
        setValue('siteName', c.branding.siteName);
        setValue('logoUrl', c.branding.logoUrl);
        setValue('faviconUrl', c.branding.faviconUrl);

        if (c.branding.lightTheme) {
          selectTheme('light');
        }

        if (c.branding.colors) {
          setColor('Primary', c.branding.colors.primary);
          setColor('Secondary', c.branding.colors.secondary);
          setColor('Accent', c.branding.colors.accent);
          document.getElementById('colorText').value = c.branding.colors.text;
          document.getElementById('colorTextVal').value = c.branding.colors.text;
        }
      }

      // SEO
      if (c.seo) {
        setValue('seoTitle', c.seo.siteTitle);
        setValue('seoDescription', c.seo.siteDescription);
        setValue('seoKeywords', c.seo.keywords);
        setValue('ogImage', c.seo.ogImage);
      }

      // Footer
      if (c.footer) {
        setValue('footerTagline', c.footer.tagline);
        setValue('copyrightName', c.footer.copyright);
      }

      // Focus Areas header
      if (c.focusAreas) {
        setValue('focusSubheading', c.focusAreas.subheading);
        setValue('focusHeading', c.focusAreas.heading);
        setValue('focusTagline', c.focusAreas.tagline);
      }

      // Images
      if (c.images) {
        setValue('heroBackground', c.images.heroBackground);
        setValue('aboutImage', c.images.aboutImage);
        setValue('parallaxImage1', c.images.parallaxImage1);
        setValue('parallaxImage2', c.images.parallaxImage2);
      }
    }

    function setValue(id, value) {
      const el = document.getElementById(id);
      if (el && value) el.value = value;
    }

    function setColor(name, value) {
      const picker = document.getElementById('color' + name);
      const text = document.getElementById('color' + name + 'Text');
      if (picker && value) picker.value = value;
      if (text && value) text.value = value;
    }

    // ==========================================
    // Repeater Fields Initialization
    // ==========================================
    function initRepeaterFields() {
      // Hero Slides
      const heroContainer = document.getElementById('heroSlidesContainer');
      heroContainer.innerHTML = '';
      (currentConfig.heroSlides || []).forEach((slide, i) => addHeroSlide(slide, i));
      if (!currentConfig.heroSlides?.length) addHeroSlide();

      // Services
      const servicesContainer = document.getElementById('servicesContainer');
      servicesContainer.innerHTML = '';
      (currentConfig.services || []).forEach((service, i) => addService(service, i));
      if (!currentConfig.services?.length) addService();

      // Solutions
      const solutionsContainer = document.getElementById('solutionsContainer');
      solutionsContainer.innerHTML = '';
      (currentConfig.solutions || []).forEach((solution, i) => addSolution(solution, i));
      if (!currentConfig.solutions?.length) addSolution();

      // Process
      const processContainer = document.getElementById('processContainer');
      processContainer.innerHTML = '';
      (currentConfig.process || []).forEach((item, i) => addProcessStep(item, i));
      if (!currentConfig.process?.length) addProcessStep();

      // Problems
      const problemsContainer = document.getElementById('problemsContainer');
      problemsContainer.innerHTML = '';
      (currentConfig.problems || []).forEach((item, i) => addProblem(item, i));
      if (!currentConfig.problems?.length) addProblem();

      // Focus Areas
      const focusAreasContainer = document.getElementById('focusAreasContainer');
      focusAreasContainer.innerHTML = '';
      const focusAreas = currentConfig.focusAreas?.areas || [];
      focusAreas.forEach((area, i) => addFocusArea(area, i));
      if (!focusAreas.length) addFocusArea();

      // Timeline
      const timelineContainer = document.getElementById('timelineContainer');
      timelineContainer.innerHTML = '';
      (currentConfig.timeline || []).forEach((item, i) => addTimelineItem(item, i));
      if (!currentConfig.timeline?.length) addTimelineItem();

      // Philosophy
      const philosophyContainer = document.getElementById('philosophyContainer');
      philosophyContainer.innerHTML = '';
      (currentConfig.philosophy || []).forEach((item, i) => addPhilosophy(item, i));
      if (!currentConfig.philosophy?.length) addPhilosophy();

      // Testimonials
      const testimonialsContainer = document.getElementById('testimonialsContainer');
      testimonialsContainer.innerHTML = '';
      (currentConfig.testimonials || []).forEach((item, i) => addTestimonial(item, i));
      if (!currentConfig.testimonials?.length) addTestimonial();

      // Gallery
      const galleryContainer = document.getElementById('galleryContainer');
      galleryContainer.innerHTML = '';
      (currentConfig.gallery || []).forEach((url, i) => addGalleryImage(url, i));
      if (!currentConfig.gallery?.length) addGalleryImage();
    }

    // ==========================================
    // Hero Slides
    // ==========================================
    function addHeroSlide(data = {}, index = null) {
      const container = document.getElementById('heroSlidesContainer');
      const i = index !== null ? index : container.children.length;

      const html = `
        <div class="repeater" data-index="${i}">
          <div class="repeater-header">
            <h4>Slide ${i + 1}</h4>
            <div class="repeater-actions">
              <button class="btn-icon delete" onclick="removeRepeaterItem(this, 'hero')"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="form-group">
            <label>Background Image URL</label>
            <input type="url" class="form-control" name="heroSlide[${i}][image]" value="${data.image || ''}" placeholder="https://images.unsplash.com/...">
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Subtitle</label>
              <input type="text" class="form-control" name="heroSlide[${i}][subtitle]" value="${data.subtitle || ''}" placeholder="e.g., Your Identity">
            </div>
            <div class="form-group">
              <label>Title</label>
              <input type="text" class="form-control" name="heroSlide[${i}][title]" value="${data.title || ''}" placeholder="e.g., I'm a Creator">
            </div>
          </div>
          <div class="form-group">
            <label>Description</label>
            <input type="text" class="form-control" name="heroSlide[${i}][description]" value="${data.description || ''}" placeholder="Brief description for this slide">
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Button Text</label>
              <input type="text" class="form-control" name="heroSlide[${i}][buttonText]" value="${data.buttonText || ''}" placeholder="e.g., Learn More">
            </div>
            <div class="form-group">
              <label>Button Link</label>
              <input type="text" class="form-control" name="heroSlide[${i}][buttonLink]" value="${data.buttonLink || ''}" placeholder="e.g., about.html">
            </div>
          </div>
        </div>
      `;

      container.insertAdjacentHTML('beforeend', html);
    }

    // ==========================================
    // Services
    // ==========================================
    function addService(data = {}, index = null) {
      const container = document.getElementById('servicesContainer');
      const i = index !== null ? index : container.children.length;

      const html = `
        <div class="repeater" data-index="${i}">
          <div class="repeater-header">
            <h4>Service ${i + 1}</h4>
            <div class="repeater-actions">
              <button class="btn-icon delete" onclick="removeRepeaterItem(this, 'services')"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Icon</label>
              <select class="form-control" name="service[${i}][icon]">
                ${iconOptions.map(icon => `<option value="${icon}" ${data.icon === icon ? 'selected' : ''}>${icon.replace('fas fa-', '')}</option>`).join('')}
              </select>
            </div>
            <div class="form-group">
              <label>Title</label>
              <input type="text" class="form-control" name="service[${i}][title]" value="${data.title || ''}" placeholder="Service name">
            </div>
          </div>
          <div class="form-group">
            <label>Short Description</label>
            <input type="text" class="form-control" name="service[${i}][shortDesc]" value="${data.shortDesc || ''}" placeholder="One line description">
          </div>
          <div class="form-group">
            <label>Full Description</label>
            <textarea class="form-control" name="service[${i}][fullDesc]" rows="3" placeholder="Detailed description...">${data.fullDesc || ''}</textarea>
          </div>
          <div class="form-group">
            <label>Features (one per line)</label>
            <textarea class="form-control" name="service[${i}][features]" rows="4" placeholder="Feature 1&#10;Feature 2&#10;Feature 3">${(data.features || []).join('\n')}</textarea>
          </div>
        </div>
      `;

      container.insertAdjacentHTML('beforeend', html);
    }

    // ==========================================
    // Solutions
    // ==========================================
    function addSolution(data = {}, index = null) {
      const container = document.getElementById('solutionsContainer');
      const i = index !== null ? index : container.children.length;

      const html = `
        <div class="repeater" data-index="${i}">
          <div class="repeater-header">
            <h4>Solution ${i + 1}</h4>
            <div class="repeater-actions">
              <button class="btn-icon delete" onclick="removeRepeaterItem(this, 'solutions')"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="form-group">
            <label>Industry/Niche Title</label>
            <input type="text" class="form-control" name="solution[${i}][title]" value="${data.title || ''}" placeholder="e.g., Healthcare, Retail, Construction">
          </div>
          <div class="form-group">
            <label>Description</label>
            <textarea class="form-control" name="solution[${i}][description]" rows="3" placeholder="How you help clients in this industry...">${data.description || ''}</textarea>
          </div>
          <div class="form-group">
            <label>Key Features (one per line)</label>
            <textarea class="form-control" name="solution[${i}][features]" rows="3" placeholder="Feature 1&#10;Feature 2&#10;Feature 3">${(data.features || []).join('\n')}</textarea>
          </div>
        </div>
      `;

      container.insertAdjacentHTML('beforeend', html);
    }

    // ==========================================
    // Process Steps
    // ==========================================
    function addProcessStep(data = {}, index = null) {
      const container = document.getElementById('processContainer');
      const i = index !== null ? index : container.children.length;

      const html = `
        <div class="repeater" data-index="${i}">
          <div class="repeater-header">
            <h4>Step ${i + 1}</h4>
            <div class="repeater-actions">
              <button class="btn-icon delete" onclick="removeRepeaterItem(this, 'process')"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="form-group">
            <label>Title</label>
            <input type="text" class="form-control" name="process[${i}][title]" value="${data.title || ''}" placeholder="e.g., Discovery & Research">
          </div>
          <div class="form-group">
            <label>Short Description</label>
            <input type="text" class="form-control" name="process[${i}][shortDesc]" value="${data.shortDesc || ''}" placeholder="Brief summary of this step">
          </div>
          <div class="form-group">
            <label>Full Description</label>
            <textarea class="form-control" name="process[${i}][fullDesc]" rows="3" placeholder="Detailed explanation of what happens in this step...">${data.fullDesc || ''}</textarea>
          </div>
          <div class="form-group">
            <label>Deliverables (one per line)</label>
            <textarea class="form-control" name="process[${i}][deliverables]" rows="3" placeholder="Deliverable 1&#10;Deliverable 2&#10;Deliverable 3">${(data.deliverables || []).join('\n')}</textarea>
          </div>
        </div>
      `;

      container.insertAdjacentHTML('beforeend', html);
    }

    // ==========================================
    // Problems
    // ==========================================
    function addProblem(data = {}, index = null) {
      const container = document.getElementById('problemsContainer');
      const i = index !== null ? index : container.children.length;

      const html = `
        <div class="repeater" data-index="${i}">
          <div class="repeater-header">
            <h4>Challenge ${i + 1}</h4>
            <div class="repeater-actions">
              <button class="btn-icon delete" onclick="removeRepeaterItem(this, 'problems')"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="form-group">
            <label>Problem</label>
            <textarea class="form-control" name="problem[${i}][problem]" rows="2" placeholder="Describe the challenge your clients face...">${data.problem || ''}</textarea>
          </div>
          <div class="form-group">
            <label>Solution</label>
            <textarea class="form-control" name="problem[${i}][solution]" rows="2" placeholder="How you solve this problem...">${data.solution || ''}</textarea>
          </div>
        </div>
      `;

      container.insertAdjacentHTML('beforeend', html);
    }

    // ==========================================
    // Focus Areas
    // ==========================================
    function addFocusArea(data = {}, index = null) {
      const container = document.getElementById('focusAreasContainer');
      const i = index !== null ? index : container.children.length;

      const html = `
        <div class="repeater" data-index="${i}">
          <div class="repeater-header">
            <h4>Focus Area ${i + 1}</h4>
            <div class="repeater-actions">
              <button class="btn-icon delete" onclick="removeRepeaterItem(this, 'focusAreas')"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="form-group">
            <label>Category Label</label>
            <input type="text" class="form-control" name="focusArea[${i}][category]" value="${data.category || ''}" placeholder="e.g., SUPPORT, DESIGN, CONSULTING">
          </div>
          <div class="form-group">
            <label>Title</label>
            <input type="text" class="form-control" name="focusArea[${i}][title]" value="${data.title || ''}" placeholder="e.g., 24/7 Support Options">
          </div>
          <div class="form-group">
            <label>Background Image URL (optional)</label>
            <input type="text" class="form-control" name="focusArea[${i}][image]" value="${data.image || ''}" placeholder="https://example.com/image.jpg">
          </div>
        </div>
      `;

      container.insertAdjacentHTML('beforeend', html);
    }

    // ==========================================
    // Timeline
    // ==========================================
    function addTimelineItem(data = {}, index = null) {
      const container = document.getElementById('timelineContainer');
      const i = index !== null ? index : container.children.length;

      const html = `
        <div class="repeater" data-index="${i}">
          <div class="repeater-header">
            <h4>Period ${i + 1}</h4>
            <div class="repeater-actions">
              <button class="btn-icon delete" onclick="removeRepeaterItem(this, 'timeline')"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Time Period</label>
              <input type="text" class="form-control" name="timeline[${i}][period]" value="${data.period || ''}" placeholder="e.g., 2010-2015, Early Career">
            </div>
            <div class="form-group">
              <label>Title</label>
              <input type="text" class="form-control" name="timeline[${i}][title]" value="${data.title || ''}" placeholder="e.g., The Foundation Years">
            </div>
          </div>
          <div class="form-group">
            <label>Description</label>
            <textarea class="form-control" name="timeline[${i}][description]" rows="3" placeholder="What happened during this period...">${data.description || ''}</textarea>
          </div>
        </div>
      `;

      container.insertAdjacentHTML('beforeend', html);
    }

    // ==========================================
    // Philosophy
    // ==========================================
    function addPhilosophy(data = {}, index = null) {
      const container = document.getElementById('philosophyContainer');
      const i = index !== null ? index : container.children.length;

      const html = `
        <div class="repeater" data-index="${i}">
          <div class="repeater-header">
            <h4>Value ${i + 1}</h4>
            <div class="repeater-actions">
              <button class="btn-icon delete" onclick="removeRepeaterItem(this, 'philosophy')"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Icon</label>
              <select class="form-control" name="philosophy[${i}][icon]">
                ${iconOptions.map(icon => `<option value="${icon}" ${data.icon === icon ? 'selected' : ''}>${icon.replace('fas fa-', '')}</option>`).join('')}
              </select>
            </div>
            <div class="form-group">
              <label>Title</label>
              <input type="text" class="form-control" name="philosophy[${i}][title]" value="${data.title || ''}" placeholder="e.g., Integrity">
            </div>
          </div>
          <div class="form-group">
            <label>Description</label>
            <textarea class="form-control" name="philosophy[${i}][description]" rows="2" placeholder="Brief explanation...">${data.description || ''}</textarea>
          </div>
        </div>
      `;

      container.insertAdjacentHTML('beforeend', html);
    }

    // ==========================================
    // Testimonials
    // ==========================================
    function addTestimonial(data = {}, index = null) {
      const container = document.getElementById('testimonialsContainer');
      const i = index !== null ? index : container.children.length;

      const html = `
        <div class="repeater" data-index="${i}">
          <div class="repeater-header">
            <h4>Testimonial ${i + 1}</h4>
            <div class="repeater-actions">
              <button class="btn-icon delete" onclick="removeRepeaterItem(this, 'testimonials')"><i class="fas fa-trash"></i></button>
            </div>
          </div>
          <div class="form-group">
            <label>Quote</label>
            <textarea class="form-control" name="testimonial[${i}][quote]" rows="3" placeholder="What the client said...">${data.quote || ''}</textarea>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Author Name</label>
              <input type="text" class="form-control" name="testimonial[${i}][author]" value="${data.author || ''}" placeholder="Client Name">
            </div>
            <div class="form-group">
              <label>Role/Title</label>
              <input type="text" class="form-control" name="testimonial[${i}][role]" value="${data.role || ''}" placeholder="CEO, Manager, etc.">
            </div>
          </div>
          <div class="form-group">
            <label>Company (optional)</label>
            <input type="text" class="form-control" name="testimonial[${i}][company]" value="${data.company || ''}" placeholder="Company Name">
          </div>
        </div>
      `;

      container.insertAdjacentHTML('beforeend', html);
    }

    // ==========================================
    // Gallery
    // ==========================================
    function addGalleryImage(url = '', index = null) {
      const container = document.getElementById('galleryContainer');
      const i = index !== null ? index : container.children.length;

      const html = `
        <div class="repeater" data-index="${i}" style="padding: 15px;">
          <div style="display: flex; gap: 15px; align-items: center;">
            <input type="url" class="form-control" name="gallery[${i}]" value="${url}" placeholder="Image URL">
            <button class="btn-icon delete" onclick="removeRepeaterItem(this, 'gallery')"><i class="fas fa-trash"></i></button>
          </div>
        </div>
      `;

      container.insertAdjacentHTML('beforeend', html);
    }

    // ==========================================
    // Remove Repeater Item
    // ==========================================
    function removeRepeaterItem(btn, type) {
      const item = btn.closest('.repeater');
      if (item) {
        item.remove();
        // Renumber remaining items
        const container = item.parentElement || document.getElementById(type + 'Container') || document.getElementById(type + 'SlidesContainer');
        if (container) {
          container.querySelectorAll('.repeater').forEach((el, i) => {
            el.dataset.index = i;
            const header = el.querySelector('h4');
            if (header) {
              const label = type.charAt(0).toUpperCase() + type.slice(1).replace(/s$/, '');
              header.textContent = `${label} ${i + 1}`;
            }
          });
        }
      }
    }

    // ==========================================
    // Theme Selection
    // ==========================================
    function selectTheme(theme) {
      document.querySelectorAll('.theme-option').forEach(opt => {
        opt.classList.remove('selected');
        if (opt.classList.contains(theme)) {
          opt.classList.add('selected');
        }
      });
      document.getElementById('lightTheme').value = theme === 'light' ? 'true' : 'false';
    }

    // ==========================================
    // Image Preview Updates
    // ==========================================
    function updateLogoPreview() {
      const url = document.getElementById('logoUrl').value;
      const preview = document.getElementById('logoPreview');
      if (url) {
        preview.innerHTML = `<img src="${url}" alt="Logo preview" onerror="this.parentElement.innerHTML='<i class=\\'fas fa-exclamation-triangle\\'></i>'">`;
      } else {
        preview.innerHTML = '<i class="fas fa-image"></i>';
      }
    }

    function updateAboutImagePreview() {
      const url = document.getElementById('aboutImage').value;
      const preview = document.getElementById('aboutImagePreview');
      if (url) {
        preview.innerHTML = `<img src="${url}" alt="Preview" onerror="this.parentElement.innerHTML='<i class=\\'fas fa-exclamation-triangle\\'></i>'">`;
      } else {
        preview.innerHTML = '<i class="fas fa-image"></i>';
      }
    }


    // ==========================================
    // Collect Form Data
    // ==========================================
    function collectFormData() {
      const config = {
        personal: {
          name: `${getValue('firstName')} ${getValue('lastName')}`,
          firstName: getValue('firstName'),
          lastName: getValue('lastName'),
          title: getValue('title'),
          tagline: getValue('tagline'),
          shortBio: getValue('shortBio'),
          fullBio: getValue('fullBio'),
          yearsExperience: getValue('yearsExperience'),
          location: getValue('location')
        },
        contact: {
          email: getValue('email'),
          phone: getValue('phone'),
          website: getValue('website'),
          calendlyUrl: getValue('calendlyUrl'),
          responseTime: 'Usually within 24 hours'
        },
        social: {
          linkedin: getValue('social-linkedin'),
          twitter: getValue('social-twitter'),
          github: getValue('social-github'),
          instagram: getValue('social-instagram'),
          youtube: getValue('social-youtube'),
          facebook: getValue('social-facebook')
        },
        branding: {
          siteName: getValue('siteName'),
          logoUrl: getValue('logoUrl'),
          faviconUrl: getValue('faviconUrl'),
          lightTheme: getValue('lightTheme') === 'true',
          colors: {
            primary: getValue('colorPrimaryText') || '#000000',
            secondary: getValue('colorSecondaryText') || '#090909',
            accent: getValue('colorAccentText') || '#c5a47e',
            text: getValue('colorTextVal') || '#ffffff',
            textMuted: '#999999',
            border: 'rgba(255, 255, 255, 0.1)'
          }
        },
        heroSlides: collectRepeaterData('heroSlide', ['image', 'subtitle', 'title', 'description', 'buttonText', 'buttonLink']),
        services: collectRepeaterData('service', ['icon', 'title', 'shortDesc', 'fullDesc'], ['features']),
        solutions: collectRepeaterData('solution', ['title', 'description'], ['features']),
        focusAreas: {
          subheading: getValue('focusSubheading') || siteConfig.focusAreas?.subheading || 'Where We Can Help',
          heading: getValue('focusHeading') || siteConfig.focusAreas?.heading || 'Areas of Expertise',
          tagline: getValue('focusTagline') || siteConfig.focusAreas?.tagline || '',
          areas: collectRepeaterData('focusArea', ['category', 'title', 'image'])
        },
        timeline: collectRepeaterData('timeline', ['period', 'title', 'description']),
        philosophy: collectRepeaterData('philosophy', ['icon', 'title', 'description']),
        testimonials: collectRepeaterData('testimonial', ['quote', 'author', 'role', 'company']),
        gallery: collectGalleryData(),
        images: {
          heroBackground: getValue('heroBackground') || siteConfig.images?.heroBackground || '',
          aboutImage: getValue('aboutImage') || siteConfig.images?.aboutImage || '',
          parallaxImage1: getValue('parallaxImage1') || siteConfig.images?.parallaxImage1 || '',
          parallaxImage2: getValue('parallaxImage2') || siteConfig.images?.parallaxImage2 || ''
        },
        seo: {
          siteTitle: getValue('seoTitle') || siteConfig.seo?.siteTitle || '',
          siteDescription: getValue('seoDescription') || siteConfig.seo?.siteDescription || '',
          keywords: getValue('seoKeywords') || siteConfig.seo?.keywords || '',
          ogImage: getValue('ogImage') || siteConfig.seo?.ogImage || ''
        },
        footer: {
          tagline: getValue('footerTagline') || siteConfig.footer?.tagline || '',
          copyright: getValue('copyrightName') || siteConfig.footer?.copyright || ''
        },
        // Use current config if available, otherwise fall back to defaults
        process: collectRepeaterData('process', ['title', 'shortDesc', 'fullDesc'], ['deliverables']),
        problems: collectRepeaterData('problem', ['problem', 'solution']),
        audit: currentConfig.audit || siteConfig.audit
      };

      return config;
    }

    // Validate config before export
    function validateConfig(config) {
      const errors = [];

      if (!config.personal?.firstName && !config.personal?.lastName) {
        errors.push('Name is required');
      }
      if (!config.contact?.email) {
        errors.push('Email is required');
      }
      if (!config.branding?.siteName) {
        errors.push('Site name is required');
      }

      return errors;
    }

    function getValue(id) {
      const el = document.getElementById(id);
      return el ? el.value.trim() : '';
    }

    function collectRepeaterData(prefix, fields, arrayFields = []) {
      const items = [];
      let i = 0;

      while (true) {
        const firstField = document.querySelector(`[name="${prefix}[${i}][${fields[0]}]"]`);
        if (!firstField) break;

        const item = {};
        fields.forEach(field => {
          const el = document.querySelector(`[name="${prefix}[${i}][${field}]"]`);
          item[field] = el ? el.value.trim() : '';
        });

        arrayFields.forEach(field => {
          const el = document.querySelector(`[name="${prefix}[${i}][${field}]"]`);
          item[field] = el ? el.value.split('\n').map(s => s.trim()).filter(s => s) : [];
        });

        // Only add if has content
        if (fields.some(f => item[f])) {
          items.push(item);
        }
        i++;
      }

      return items;
    }

    function collectGalleryData() {
      const items = [];
      let i = 0;

      while (true) {
        const el = document.querySelector(`[name="gallery[${i}]"]`);
        if (!el) break;
        if (el.value.trim()) {
          items.push(el.value.trim());
        }
        i++;
      }

      return items;
    }

    // ==========================================
    // Save & Export Functions
    // ==========================================
    function saveConfig() {
      const config = collectFormData();
      localStorage.setItem('siteConfig', JSON.stringify(config));

      // Show success message
      const msg = document.getElementById('successMessage');
      msg.classList.add('show');

      // Scroll to top
      document.querySelector('.main-content').scrollTop = 0;

      // Mark all sections as complete
      document.querySelectorAll('.progress-dot').forEach(dot => {
        dot.classList.add('completed');
      });
    }

    function exportConfig() {
      const config = collectFormData();
      const errors = validateConfig(config);

      if (errors.length > 0) {
        const proceed = confirm(
          'Warning: The following fields are empty or missing:\n\n' +
          '• ' + errors.join('\n• ') +
          '\n\nDo you want to export anyway? (Missing fields will use default values)'
        );
        if (!proceed) return;
      }

      const blob = new Blob([JSON.stringify(config, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'site-config.json';
      a.click();
      URL.revokeObjectURL(url);

      // Show success message
      alert('Configuration exported! To make it permanent on GitHub Pages:\n\n1. Replace site-config.json in your repo with this file\n2. Commit and push the changes');
    }

    function importConfig() {
      document.getElementById('importFileInput').click();
    }

    function handleImport(event) {
      const file = event.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = function(e) {
        try {
          const config = JSON.parse(e.target.result);
          currentConfig = config;
          localStorage.setItem('siteConfig', JSON.stringify(config));
          populateForm();
          initRepeaterFields();
          alert('Configuration imported successfully!');
        } catch (err) {
          alert('Error importing configuration. Please check the file format.');
        }
      };
      reader.readAsText(file);

      // Reset file input
      event.target.value = '';
    }

    function toggleDeploymentInfo() {
      const banner = document.getElementById('deploymentInfo');
      banner.classList.toggle('collapsed');
    }

    async function resetToDefaults() {
      if (confirm('Are you sure you want to reset all settings to defaults? This cannot be undone.')) {
        localStorage.removeItem('siteConfig');

        // Try to load site-config.json first (deployed defaults), fall back to config.js
        try {
          const response = await fetch('site-config.json');
          if (response.ok) {
            const siteConfigJson = await response.json();
            currentConfig = JSON.parse(JSON.stringify(siteConfigJson));
            console.log('Reset to site-config.json defaults');
          } else {
            throw new Error('site-config.json not found');
          }
        } catch (e) {
          // Fall back to config.js defaults
          currentConfig = JSON.parse(JSON.stringify(siteConfig));
          console.log('Reset to config.js defaults');
        }

        populateForm();
        initRepeaterFields();
        document.querySelectorAll('.progress-dot').forEach(dot => {
          dot.classList.remove('completed');
        });
        document.getElementById('successMessage').classList.remove('show');
      }
    }
  </script>
</body>
</html>
